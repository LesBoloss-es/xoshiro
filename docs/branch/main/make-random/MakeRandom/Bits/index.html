<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Bits (make-random.MakeRandom.Bits)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">make-random</a> &#x00BB; <a href="../index.html">MakeRandom</a> &#x00BB; Bits</nav><h1>Module <code>MakeRandom.Bits</code></h1><p>Signatures for providers of bits.</p><nav class="toc"><ul><li><a href="#bits-providers">Bits Providers</a><ul><li><a href="#basic">Basic</a></li><li><a href="#state">State</a></li><li><a href="#init">Init</a></li><li><a href="#full">Full</a></li></ul></li></ul></nav></header><aside></aside><section><header><h2 id="bits-providers"><a href="#bits-providers" class="anchor"></a>Bits Providers</h2><p>This module contains the signatures of the modules that can be given to the various functors in <a href="../index.html"><code>MakeRandom</code></a>, specifying how to provide bits.</p></header><section><header><h3 id="basic"><a href="#basic" class="anchor"></a>Basic</h3><p>Degenerated, stateless bits provider. This is basically only a function <code>bits</code> taking nothing as argument and returning a random value, either 30-bits with <a href="module-type-Basic30/index.html"><code>Basic30</code></a> or 64-bits with <a href="module-type-Basic64/index.html"><code>Basic64</code></a>. When using such an interface, all the initialisation, state manipulation, etc., must be done outside of the functor. It is therefore preferable to provide a full interface (see below).</p></header><div class="spec module-type" id="module-type-Basic30"><a href="#module-type-Basic30" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-Basic30/index.html">Basic30</a> = <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module-type" id="module-type-Basic64"><a href="#module-type-Basic64" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-Basic64/index.html">Basic64</a> = <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div></section><section><header><h3 id="state"><a href="#state" class="anchor"></a>State</h3><p>Bits provider taking a state as input. This is basically the pair of an abstract type <code>state</code> and a function <code>bits</code> taking the state as argument and returning a random value, either 30-bits with <a href="module-type-State30/index.html"><code>State30</code></a> or 64-bits with <a href="module-type-State64/index.html"><code>State64</code></a>.</p></header><div class="spec module-type" id="module-type-State30"><a href="#module-type-State30" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-State30/index.html">State30</a> = <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module-type" id="module-type-State64"><a href="#module-type-State64" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-State64/index.html">State64</a> = <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div></section><section><header><h3 id="init"><a href="#init" class="anchor"></a>Init</h3><p>State-manipulation functions. If some of them are very similar to the signature of <span class="xref-unresolved" title="unresolved reference to &quot;Stdlib.Random&quot;"><code>Stdlib</code>.Random</span> (and thus not bringing much improvement), there is one big change which lies within these <code>init_size</code> and <code>init</code> values: they are a convenience to build the <span class="xref-unresolved" title="unresolved reference to &quot;Stdlib.Random.full_init&quot;"><span class="xref-unresolved" title="unresolved reference to &quot;Stdlib.Random&quot;"><code>Stdlib</code>.Random</span>.full_init</span> function.</p><p>The <code>full_init</code> function takes a state and an array of <b>any size</b> containing <b>any kind</b> of integers (in particular, the array can be empty or it can contain only very-low-entropy integers). Instead, this functor requires a value <code>init_size</code> stating how many values you will need and a function <code>init</code> taking a state and an array of values of initialising the state from it. The difference is that the array of values (either 30-bits in <a href="module-type-Init30/index.html"><code>Init30</code></a> or 64-bits in <a href="module-type-Init64/index.html"><code>Init64</code></a>) is always of size <code>init_size</code> and all the values have already &quot;rather-good&quot;-entropy (that is, as much as possible given the initial seed).</p><p>Finally, instead of giving a default state, we only ask for a default seed from which the default state will be initialised. Any value can be used here (we like to use 135801055; can you guess why?).</p></header><div class="spec module-type" id="module-type-Init30"><a href="#module-type-Init30" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-Init30/index.html">Init30</a> = <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module-type" id="module-type-Init64"><a href="#module-type-Init64" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-Init64/index.html">Init64</a> = <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div></section><section><header><h3 id="full"><a href="#full" class="anchor"></a>Full</h3><p>Full providers. These are only the combination of a bits provider (eg. <a href="module-type-State30/index.html"><code>State30</code></a>) and state-manipulation functions (eg. <a href="module-type-Init30/index.html"><code>Init30</code></a>). The common uses would only require <a href="module-type-Full30/index.html"><code>Full30</code></a> or <a href="module-type-Full64/index.html"><code>Full64</code></a> depending on whether the PRNG manipulates values of 30 or 64 bits (usually, the output value is of same precision as the state).</p><p>Some other functors are provided if the state and the bits provider differ. This is for instance useful if the bits provider returns 64-bits outputs and is written in C. In this case, it is more interesting to turn it into a 30-bits provider in C and bind this 30-bits function (because 30-bits integers are faster to convert to OCaml than 64-bits integers). In order to limit the code duplication, one can keep the state manipulation functions as 64 bits and, in such a situation, we end up providing <a href="module-type-Full30Init64/index.html"><code>Full30Init64</code></a>.</p></header><div class="spec module-type" id="module-type-Full30"><a href="#module-type-Full30" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-Full30/index.html">Full30</a> = <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module-type" id="module-type-Full64"><a href="#module-type-Full64" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-Full64/index.html">Full64</a> = <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module-type" id="module-type-Full30Init64"><a href="#module-type-Full30Init64" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-Full30Init64/index.html">Full30Init64</a> = <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module-type" id="module-type-Full64Init30"><a href="#module-type-Full64Init30" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-Full64Init30/index.html">Full64Init30</a> = <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div></section></section></div></body></html>